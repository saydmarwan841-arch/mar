{% extends 'base.html' %}

{% block title %}ÙƒÙˆÙŠØ² Ø§Ù„Ø­Ø¨ - Ø§Ù„Ù†ØªØ§Ø¦Ø¬{% endblock %}

{% block content %}
<div class="results-container">
    <div class="glass-card results-card">
        <!-- Celebration animation -->
        <div class="celebration">
            <span class="confetti">ğŸ‰</span>
            <span class="confetti">ğŸ’</span>
            <span class="confetti">âœ¨</span>
            <span class="confetti">ğŸ’•</span>
            <span class="confetti">ğŸŠ</span>
        </div>

        <!-- Score Display -->
        <div class="score-display">
            <div class="score-circle">
                <span class="score-value">{{ score }}</span>
                <span class="score-total">/ {{ total }}</span>
            </div>
            <div class="percentage-display">
                <span class="percentage-value">{{ percentage|floatformat:0 }}%</span>
            </div>
        </div>

        <!-- Romantic Message -->
        <h1 class="results-message">{{ message }}</h1>
        <p class="results-message-en">{{ message_en }}</p>

        <!-- Result Details -->
        <div class="result-details">
            {% if percentage == 100 %}
            <p class="detail-text">Ø£Ù†ØªÙ Ù…Ø«Ø§Ù„ÙŠØ© ØªÙ…Ø§Ù…Ø§Ù‹! Ø³ØªØ¨Ù‚ÙŠÙ† ÙÙŠ Ù‚Ù„Ø¨ÙŠ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¨Ø¯! ğŸ’•</p>
            {% elif percentage >= 80 %}
            <p class="detail-text">Ø£Ù†ØªÙ Ø°ÙƒÙŠØ© ÙˆØ¬Ù…ÙŠÙ„Ø© ÙˆØªØ³ØªØ­Ù‚ÙŠÙ† ÙƒÙ„ Ø§Ù„Ø­Ø¨! ğŸ’–</p>
            {% elif percentage >= 60 %}
            <p class="detail-text">Ø£Ù†ØªÙ Ø±Ø§Ø¦Ø¹Ø© ÙˆØ£Ù†Ø§ ÙØ®ÙˆØ± Ø¨Ùƒ Ø¬Ø¯Ø§Ù‹! ğŸ’—</p>
            {% else %}
            <p class="detail-text">Ø§Ù„Ù…Ù‡Ù… Ø£Ù†Ùƒ Ù…Ø¹ÙŠØŒ ÙˆØ£Ù†ØªÙ Ø£Ù‡Ù… Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¬Ø­Øª ÙÙŠÙ‡! ğŸ’</p>
            {% endif %}
        </div>

        <!-- Decorative divider -->
        <div class="decorative-divider"></div>

        <!-- Action Buttons -->
        <div class="results-actions">
            <a href="{% url 'quiz' %}" class="btn btn-primary">
                Ø®Ø°ÙŠ Ø§Ù„ÙƒÙˆÙŠØ² Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
                <span class="btn-arrow">â†’</span>
            </a>
            <a href="{% url 'home' %}" class="btn btn-secondary">
                Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
            </a>
        </div>

        <!-- Heart footer -->
        <p class="heart-footer">â™¥ï¸ Ù…Ø¹ ÙƒÙ„ Ø­Ø¨ÙŠ â™¥ï¸</p>
    </div>

    <!-- Animated background elements -->
    <div class="floating-shape shape-1"></div>
    <div class="floating-shape shape-2"></div>
    <div class="floating-shape shape-3"></div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Celebration animation on page load
    window.addEventListener('load', function () {
        const confetti = document.querySelectorAll('.confetti');
        confetti.forEach((item, index) => {
            item.style.animation = `float ${3 + index * 0.5}s ease-in-out infinite`;
            item.style.animationDelay = `${index * 0.2}s`;
        });
    });

    // Counter animation for score
    function animateScore() {
        const scoreValue = document.querySelector('.score-value');
        const targetScore = parseInt(scoreValue.textContent);
        let currentScore = 0;
        const increment = Math.ceil(targetScore / 50);

        const counter = setInterval(() => {
            currentScore += increment;
            if (currentScore >= targetScore) {
                scoreValue.textContent = targetScore;
                clearInterval(counter);
            } else {
                scoreValue.textContent = currentScore;
            }
        }, 20);
    }

    window.addEventListener('load', animateScore);
</script>
{% endblock %}